{% extends 'gestionOfertas/base.html' %}

{% block title %}Registro - MatchJob{% endblock %}

{% block content %}
<h2 class="text-center mb-4">Crear una cuenta</h2>

<form method="post">
    {% csrf_token %}

    <div class="form-group mb-3">
        <label for="id_tipo_usuario">Tipo de Usuario</label>
        {{ form.tipo_usuario }}
    </div>

    <div id="persona-fields" class="user-type-fields" style="display:none;">
        <div class="form-group mb-3">
            <label for="id_nombres">Nombres</label>
            {{ form.nombres }}
        </div>
        <div class="form-group mb-3">
            <label for="id_apellidos">Apellidos</label>
            {{ form.apellidos }}
        </div>
        <div class="form-group mb-3">
            <label for="id_fecha_nacimiento">Fecha de Nacimiento</label>
            {{ form.fecha_nacimiento }}
        </div>
        <div class="form-group mb-3">
            <label for="id_nacionalidad">Nacionalidad</label>
            {{ form.nacionalidad }}
        </div>
    </div>

    <div id="empresa-fields" class="user-type-fields" style="display:none;">
        <div class="form-group mb-3">
            <label for="id_nombre_empresa">Nombre de la Empresa</label>
            {{ form.nombre_empresa }}
        </div>
        <div class="form-group mb-3">
            <label for="id_rut_empresa">RUT de la Empresa</label>
            {{ form.rut_empresa }}
        </div>
        <div class="form-group mb-3">
            <label for="id_razon_social">Razón Social</label>
            {{ form.razon_social }}
        </div>
        <div class="form-group mb-3">
            <label for="id_giro">Giro Comercial</label>
            {{ form.giro }}
        </div>
    </div>

    <div class="form-group mb-3">
        <label for="id_username">RUT</label>
        {{ form.username }}
    </div>

    <div class="form-group mb-3">
        <label for="id_correo">Correo electrónico</label>
        {{ form.correo }}
    </div>

    <div class="form-group mb-3">
        <label for="id_telefono">Teléfono</label>
        {{ form.telefono }}
    </div>

    <div class="form-group mb-3">
        <label for="id_password">Contraseña</label>
        {{ form.password }}  </div>

    <div class="form-group mb-4">
        <button type="submit" class="btn btn-primary w-100">Crear cuenta</button>
    </div>
</form>

{% endblock %}

{% block js %}
<script>
    function toggleUsuarioFields() {
        const tipoUsuario = document.getElementById('id_tipo_usuario').value;
        const personaFields = document.getElementById('persona-fields');
        const empresaFields = document.getElementById('empresa-fields');

        // Mostrar/ocultar campos según el tipo de usuario
        if (tipoUsuario === 'persona') {
            personaFields.style.display = 'block';
            empresaFields.style.display = 'none';
        } else if (tipoUsuario === 'empresa') {
            personaFields.style.display = 'none';
            empresaFields.style.display = 'block';
        }
    }

    // Llamar la función para configurar los campos al cargar la página
    window.onload = function() {
        toggleUsuarioFields();  // Asegurarse de que los campos se muestren correctamente al cargar
        document.getElementById('id_tipo_usuario').addEventListener('change', toggleUsuarioFields);  // Añadir listener para cambios
    };
</script>
{% endblock %}